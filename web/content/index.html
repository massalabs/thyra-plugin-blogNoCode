<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Massa Blog No Code Plugin</title>

        <link
            rel="stylesheet"
            href="//cdnjs.cloudflare.com/ajax/libs/css-spinning-spinners/1.1.0/load2.css" />

        <link
            href="https://unpkg.com/grapesjs/dist/css/grapes.min.css"
            rel="stylesheet" />
        <link href="dist/grapesjs-preset-webpage.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="./website.css" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
            crossorigin="anonymous" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" />
        <script
            type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
            crossorigin="anonymous"></script>
        <script
            type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
            crossorigin="anonymous"></script>
        <script
            type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script
            type="text/javascript"
            src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous"></script>

        <script src="https://unpkg.com/grapesjs"></script>
        <script src="https://unpkg.com/grapesjs-preset-webpage@1.0.2"></script>
        <script src="https://unpkg.com/grapesjs-blocks-basic@1.0.1"></script>
        <script src="https://unpkg.com/grapesjs-plugin-forms@2.0.5"></script>
        <script src="https://unpkg.com/grapesjs-component-countdown@1.0.1"></script>
        <script src="https://unpkg.com/grapesjs-plugin-export@1.0.11"></script>
        <script src="https://unpkg.com/grapesjs-tabs@1.0.6"></script>
        <script src="https://unpkg.com/grapesjs-custom-code@1.0.1"></script>
        <script src="https://unpkg.com/grapesjs-touch@0.1.1"></script>
        <script src="https://unpkg.com/grapesjs-parser-postcss@1.0.1"></script>
        <script src="https://unpkg.com/grapesjs-tooltip@0.1.7"></script>
        <script src="https://unpkg.com/grapesjs-tui-image-editor@0.1.3"></script>
        <script src="https://unpkg.com/grapesjs-typed@1.0.5"></script>
        <script src="https://unpkg.com/grapesjs-style-bg@2.0.1"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.0.2/jszip-utils.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

        <script type="text/javascript" src="event-manager.js"></script>

        <style>
            body,
            html {
                height: 100%;
                margin: 0;
            }

            .modal {
                display: none;
                position: fixed;
                z-index: 99;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                overflow: auto;
                background-color: rgba(0, 0, 0, 0.4);
            }

            .form-control,
            .form-control:focus {
                color: white;
                border-radius: 0;
                border: none;
                border-bottom-color: currentcolor;
                border-bottom-style: none;
                border-bottom-width: medium;
                border-bottom: 2px solid hsla(0, 0%, 100%, 0.2);
                background-color: transparent;
                box-shadow: none;
            }

            .modal-content {
                background-color: #fefefe;
                margin: 15% auto;
                padding: 20px;
                border: 1px solid #888;
                width: 80%;
            }

            .close {
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
            }

            .close:hover,
            .close:focus {
                color: black;
                text-decoration: none;
                cursor: pointer;
            }
            .lds-circle {
                display: inline-block;
                transform: translateZ(1px);
            }
            .lds-circle > div {
                display: inline-block;
                width: 64px;
                height: 64px;
                margin: 8px;
                border-radius: 50%;
                background: #fff;
                animation: lds-circle 2.4s cubic-bezier(0, 0.2, 0.8, 1) infinite;
            }
            @keyframes lds-circle {
                0%,
                100% {
                    animation-timing-function: cubic-bezier(0.5, 0, 1, 0.5);
                }
                0% {
                    transform: rotateY(0deg);
                }
                50% {
                    transform: rotateY(1800deg);
                    animation-timing-function: cubic-bezier(0, 0.5, 0.5, 1);
                }
                100% {
                    transform: rotateY(3600deg);
                }
            }
        </style>
    </head>
    <body>
        <div
            style="
                position: absolute;
                left: 52%;
                z-index: 99;
                display: flex;
                flex-direction: row;
                cursor: pointer;
            "
            onclick="openModal()">
            <img
                src="./deploy_button.svg"
                alt="massa"
                width="auto"
                height="40px" />
        </div>

        <div id="myModal" class="modal">
            <div
                class="modal-content"
                style="
                    display: flex;
                    text-align: center;
                    flex-direction: column;
                    align-items: center;
                    background: #33506a;
                    border-radius: 30px;
                    border: 3px solid #808080;
                    width: 50vw;
                ">
                <div style="width: 100%">
                    <span class="close" onclick="closeModal()">&times;</span>
                </div>
                <h2
                    class="mb-4"
                    style="font-size: 1.8em; color: hsla(0, 0%, 100%, 0.2)">
                    Upload a website
                </h2>
                <div class="website-line">
                    <h4 class="website-card-label" style="color: white">
                        On wallet
                    </h4>
                    <div style="display: flex; flex-direction: row">
                        <div style="width: 150px">
                            <div id="wallet-popover" class="popover__wrapper">
                                <a class="wallet_button" href="#">
                                    <h2 class="popover__title">Connect</h2>
                                </a>
                                <div class="popover__content">
                                    <ul id="wallet-list"></ul>
                                </div>
                            </div>
                        </div>
                        <a
                            href="http://my.massa/thyra/wallet"
                            target="_blank"
                            rel=""
                            style="text-decoration: none">
                            <button
                                id="create-wallet"
                                class="primary-button primary-button me-5 small-button"
                                style="
                                    border-radius: 30px;
                                    display: none;
                                    height: 32px;
                                ">
                                <p style="font-size: 0.9em">Create a Wallet</p>
                            </button>
                        </a>
                        <div class="align-right">
                            <p
                                id="balance-error"
                                style="display: none; color: red">
                                You don't have enough MASSA
                            </p>
                        </div>
                    </div>
                </div>

                <div class="website-line">
                    <div class="website-line">
                        <h4 class="website-card-label" style="color: white">
                            Website Name
                        </h4>
                    </div>
                    <div class="website-dns">
                        <input
                            class="form-control"
                            id="websiteName"
                            name="websiteName"
                            type="text" />
                    </div>
                </div>
                <div class="align-right">
                    <p id="website-info-display" class="website-info-display">
                        Use alphanumerical characters and lowercase
                    </p>
                </div>
                <div class="align-right">
                    <h4 class="dns-error" id="dns-error" style="color: red">
                        Website Name must be only lowercase letters and numbers
                    </h4>
                </div>

                <button
                    class="primary-button primary-button me-5 small-button"
                    id="website-upload"
                    style="border-radius: 30px"
                    onClick="handleDeploy()"
                    type="button"
                    value="Upload MB">
                    Deploy to massa blockchain
                </button>
                <div id="loader" style="display: none" class="lds-circle">
                    <div></div>
                </div>
            </div>
        </div>

        <div id="gjs" style="height: 0px; overflow: hidden">
            <div
                class="panel"
                style="background-color: #888; border-radius: 30px">
                <h1 class="welcome">Welcome to</h1>
                <div
                    style="
                        align-items: center;
                        text-align: center;
                        margin-top: 30px;
                    ">
                    <img
                        src="https://ipfs.io/ipfs/QmbTFekzkRrhZYhyYY31D8ZRn19EK2W2KmnHbD6tsiJRM8"
                        width="200px" />
                </div>

                <div class="big-title">
                    <span>Blog No Code Plugin</span>
                </div>
                <div class="description">
                    A tool that allows you to effortlessly, and without any
                    programming skills build and store simple websites on Massa
                    blockchain. The drag-and-drop interface allows to easily
                    create stunning, secure, scalable, and fully on-chain
                    websites. Deploy censorship-resistant websites, fully
                    anonymously!
                </div>
            </div>
            <style>
                .panel {
                    width: 90%;
                    max-width: 700px;
                    border-radius: 3px;
                    padding: 30px 20px;
                    margin: 150px auto 0px;
                    background-color: #d983a6;
                    box-shadow: 0px 3px 10px 0px rgba(0, 0, 0, 0.25);
                    color: rgba(255, 255, 255, 0.75);
                    font: caption;
                    font-weight: 100;
                }

                .welcome {
                    text-align: center;
                    font-weight: 100;
                    margin: 0px;
                }

                .logo {
                    width: 70px;
                    height: 70px;
                    vertical-align: middle;
                }

                .logo path {
                    pointer-events: none;
                    fill: none;
                    stroke-linecap: round;
                    stroke-width: 7;
                    stroke: #fff;
                }

                .big-title {
                    text-align: center;
                    font-size: 3.5rem;
                    margin: 15px 0;
                }

                .description {
                    text-align: justify;
                    font-size: 1rem;
                    line-height: 1.5rem;
                }
            </style>
        </div>

        <script type="text/javascript">
            setTimeout(() => {
                window.editor = grapesjs.init({
                    height: "100%",
                    showOffsets: true,
                    noticeOnUnload: false,
                    storageManager: false,
                    container: "#gjs",
                    fromElement: true,

                    plugins: [
                        "gjs-blocks-basic",
                        "grapesjs-plugin-forms",
                        "grapesjs-component-countdown",
                        "grapesjs-plugin-export",
                        "grapesjs-tabs",
                        "grapesjs-custom-code",
                        "grapesjs-touch",
                        "grapesjs-parser-postcss",
                        "grapesjs-tooltip",
                        "grapesjs-tui-image-editor",
                        "grapesjs-typed",
                        "grapesjs-style-bg",
                        "grapesjs-preset-webpage",
                    ],
                    pluginsOpts: {
                        "grapesjs-preset-webpage": {},
                    },
                });
            });
        </script>
        <script type="text/javascript" src="website.js"></script>
    </body>
</html>
